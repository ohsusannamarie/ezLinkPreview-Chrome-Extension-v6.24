 chrome.webRequest.onHeadersReceived.addListener(  function(details) {	var header, headers, i, name, newHeaders, redirectUrl, url, _i, _len;	headers = details.responseHeaders;	newHeaders = [];	for (i = _i = 0, _len = headers.length; _i < _len; i = ++_i) {		header = headers[i];		name = header.name.toLowerCase();		if (!(name === 'x-frame-options' || name === 'frame-options')) {			newHeaders.push(header);		}	}	newHeaders.push({		name: 'access-control-allow-origin',		value: '*'	});	return {		responseHeaders: newHeaders	};  }, {	urls: ['*://*/*'],	types: ['sub_frame'] }, ['blocking', 'responseHeaders']);var engineJSON = { "engines": [		{ "type": "Dogpile", "name": "", "url": "", "img": "" },		{ "type": "Bing", "name": "", "url": "", "img": "" },		{ "type": "Yahoo", "name": "", "url": "", "img": "" },		{ "type": "Wiki", "name": "", "url": "", "img": "" },		{ "type": "Video", "name": "", "url": "", "img": "" },		{ "type": "Amazon", "name": "", "url": "", "img": "" },		{ "type": "Dictionary", "name": "", "url": "", "img": "" },		{ "type": "Baidu", "name": "", "url": "", "img": "" },		{ "type": "Custom", "name": "Urbandictionary", "url": "https://www.textise.net/showText.aspx?strURL=http://www.urbandictionary.com/define.php?term={0}", "img": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABEElEQVQoz2N8kaTEQApgYSAR0EADl9lHHrv3//8wvp4gT5SGnze52eR/sKt/Rdggkv2YifPv+5USvx9ziBY8ZGBggBjGKvuD3+81M/+fP69ZUZz0Zb8gf8BrVsmfvx9zfL/Ey231ASInGP3871vWjxtEed3eomj4cY2Hz+sNhP9lnxBEA6vsD0aW/x9WSfz9yMLE8xeuB90PHFpfIAxm3j8MDAx/P7LgDCUu00/fTvGzKX1nYGBg5v/z4xoPf8BrPp/Xn7aIwn3MwMDACIlpLrOPvC7vGJj+///BxMjxj4GB4c1kOU7jT9wWHxkYGP7/YoQIvmxRYkROGhxaX35c48F0JLIgihMxVWMKDoa0hAYASMtjsxfzB1oAAAAASUVORK5CYII=" },		{ "type": "Custom", "name": "DuckDuckGo", "url": "http://duckduckgo.com/?q={0}", "img": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACRklEQVQ4y42SP0xTURTGv/t4VCkCioNxURZorUKMCw7EBSUxREedlEVJbBTjQOImmoigEVKwNaEiNS6m8c+gCYmJDIQEm2hSStJEMA4Oksorr63A68O+9zmUvva1DJ7kDPfec373+3KOIInSyMQiDzj96bYZX4IZXwYASJ5mSJ4WSGc7n9a1tXtL60UpIBUYozH2DNC3sGPsckDuu4IGb5+oAKiXemjORfA/IXW0Y9/LF8ICpALjNB75AQD1oSCq3C5QVaFNhqC/frcjpKrfi73ePiFIIuluY0G2dPgQnN5eVJ/pBLI6tPEAsuE3gGFU2KkOB0fl1PAgSz3XjTyEfOK4da4dvAexpxZacMoO0LdgTs/ckhlfsks74rafr3+Efu1cJQAA498gF0ZlXWYykPtnYTzpAgAYo8dgrs3AeVVBVYsOrEv4c/cgAMCML0Mup+YWYlYzf90Ek4G85W4gt+DE5tR+W70seZphziaLgNgiHF2n8wDtC7heg43xBuRiNeCGZGsWnmbIwtMCzH4uUbBYnHfTe2hvj8LpXYVwEMZPBzZHDsBYkbcBLoj0wvydvxd6BwqTEPX1aIxGAJFfNvXkKZiJ3xC7TTArlY1xYgokofp9VJpcVoaiQ0xoCZLkj4vnOeDrtr0rTS6qfh9J7rzKj8MdUAwZK9k0PFINvkPHRM/XoveOdjRurzJIWqn6fVRcrXz+4QYVTSFJrs3NFBW4Wq2fC2kDkEQ6Ov8qMxlkTs/SNE0aqwqTl3uoDt1nOjo/XF7/D4vVW1hGKL2vAAAAAElFTkSuQmCC" },		{ "type": "Custom", "name": "StartPage", "url": "https://startpage.com/do/search?q={0}", "img": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACdklEQVQoz02SS0hVURSG/73PPr6lo+alojQ1owIzy4yCdJKVPRQibRD2wqRB9JhkUQ1KZ2lRCTWQSKWESwRJSEUQKCIJRVcsIiufFFnWDe/Vc89+rAZmuSZr/QvWx7/gZ429ntYABwCY2QHMmumgWc2gSdgQEQVjCAA0AEAzWOAgBbJCwZiBPjc7FwmONmQB0BBSQipwNgfHwAWlPGlZ1FxnhYIAxveeGNt/kQtognA9SAP23wzBwJJYeLduMnN1aNmaBc9afA9uIBj8XN1goiA8TZIA8/cBDkr81Jf6sh1A/6kmFe98Kapce77Y97zl24bSUF6hkJJcxWbQM8Zy2mpT+jtlvOMpSJeUk/b2SH3uzarYj4FfKwuFKxGRBDDG4YuFAeutbtrYUO4MB7Lu1QYO1HNASgCQCi6BHfW7UiE+CocK7PwlfMpDTUdETQQLr1ckjQTCqelj60ozOlvDqendp/3McdjB+66WuLzT9iWyFx/M0IQZDJIvjn0d/VlwrSJ5NODFOW/KLozk79Yxji1IKEk7VomMFH623fs+SWU51vEiG8Dgj9RL0/7i2xUpowFnKPC+oJJ5IA0hFZYmMwAF6XzrCishmoUiFPaQMZ9nZiV1HPOX3Cpf3tNKQHf5FdIQSqJrwGzKtPbkCgBP3+nmHpm72KrZZmsPYXveo8P+0jsVxkAqgmBsV+O0VMhL49k+3jWgGJAQw86VRIUjdLLNIwaAYqZ/R2IdgOxosC0NU5itfetF1WYbwMC4OfPQC00RrNkAzISGQUiP/u2Mwath83pIPw6oSZcMGBQ4BwBmAAAcbPvVKalpDmJuqhkBbM5BVDT7A9g1I3p6751XAAAAAElFTkSuQmCC" },		{ "type": "Custom", "name": "", "url": "", "img": "" },		{ "type": "Custom", "name": "", "url": "", "img": "" },		{ "type": "Custom", "name": "", "url": "", "img": "" },		{ "type": "Custom", "name": "", "url": "", "img": "" },		{ "type": "Custom", "name": "", "url": "", "img": "" },		{ "type": "Custom", "name": "", "url": "", "img": "" },		{ "type": "Custom", "name": "", "url": "", "img": "" },		{ "type": "Custom", "name": "", "url": "", "img": "" },		{ "type": "Custom", "name": "", "url": "", "img": "" }	]};	function GetSearchURLForEngine(engine, selText) {	switch (engine.type) {		case "Dogpile":			return 'http://www.dogpile.com/info.dogpl/search/web?q=' + selText.replace(" ", "+");			break;		case "Bing":			return 'http://www.bing.com/search?q=' + selText.replace(" ", "+");			break;		case "Yahoo":			return 'http://search.yahoo.com/search?p=' + selText.replace(" ", "+");			break;		case "Wiki":			return 'http://en.wikipedia.org/wiki/' + selText.replace(" ", "_");			break;		case "Video":			return 'http://www.bing.com/videos/search?q=' + selText.replace(" ", "+");			break;		case "Amazon":			return 'http://www.amazon.com/s?url=search-alias%3Daps&field-keywords=' + selText.replace(" ", "+");			break;		case "Dictionary":			return 'http://dictionary.reference.com/browse/' + selText.replace(" ", "+");			break;		case "Baidu":			return 'http://www.baidu.com/s?wd=' + selText.replace(" ", "+");			break;		case "Custom":			var cust = 'http://www.dogpile.com/info.dogpl/search/web?q=' + selText.replace(" ", "+");			if (engine.url && engine.url.length > 0)				cust = encodeURI(engine.url.replace('{0}', selText));			return cust;			break;	}}//check whether to show the changelog...var CURR_VERSION = "5.75";function init() {	var storedVer = localStorage['Version'] || '1.0';	if (storedVer != CURR_VERSION) {		localStorage['Version'] = CURR_VERSION;		chrome.tabs.create({url: "http://www.simpledifference.com/ezanker/ezlpchangelog.aspx", selected: true}, null);	}		addOrRemoveContextMenus();}chrome.omnibox.onInputChanged.addListener(  function(text, suggest) {   });// This event is fired with the user accepts the input in the omnibox.chrome.omnibox.onInputEntered.addListener(  function(text) {	var DefaultSearch = localStorage['SaveSearchEngine'] || '0';	var strSE = localStorage['SearchEngineJSON'];	if (strSE && strSE.length > 0) {		try {					engineJSON = JSON.parse(strSE);				} catch (errr) {}	}		var defIdx = 0;	if (DefaultSearch && DefaultSearch.length > 0){		try{			defIdx = parseInt(DefaultSearch) || 0;		}catch (errrrrr){			defIdx = 0;		}	}	var sUrl = GetSearchURLForEngine(engineJSON.engines[defIdx], text);				var scr = 'ezShowDialog("' + sUrl + '",searchTitleText);'		chrome.tabs.executeScript(null, {code: scr});  });chrome.browserAction.onClicked.addListener(function(tab) {    chrome.tabs.executeScript(null, {code:"ezSplitScreen(location.href);"});});var linkMenuGRId = null;var linkMenuGRVTId = null;var linkMenuGBId = null;var linkMenuVTId = null;var linkMenuTrelloId = null;function addOrRemoveContextMenus() {	var showCtxt = localStorage['defaultContext'] || '2';	if (showCtxt == '2') {		addContextMenus();	} else {		removeContextMenus();	}}function removeContextMenus() {	if (linkMenuGRId != null) {		chrome.contextMenus.remove(linkMenuGRId);		linkMenuGRId = null;	}			if (linkMenuGRVTId != null) {		chrome.contextMenus.remove(linkMenuGRVTId);		linkMenuGRVTId = null;	}			if (linkMenuGBId != null) {		chrome.contextMenus.remove(linkMenuGBId);		linkMenuGBId = null;	}	if (linkMenuVTId != null) {		chrome.contextMenus.remove(linkMenuVTId);		linkMenuVTId = null;	}	if (linkMenuTrelloId != null) {		chrome.contextMenus.remove(linkMenuTrelloId);		linkMenuTrelloId = null;	}}function addContextMenus(){	var handleCreateError = function()	{		if (chrome.extension.lastError && chrome.extension.lastError.length > 0) {			console.error("Error creating context menu: " + chrome.extension.lastError);		} else {			console.log("Context menu created.");		}	};		if (linkMenuGRId == null) {		var linkMenuGR = {			'title': 'Save link to Google+',			'contexts': ['link'],			'onclick': function (info, tab) {				contextMenuGReaderOnClick(info, tab, false);			},			'targetUrlPatterns': ['http://*/*', 'https://*/*']		};				linkMenuGRId = chrome.contextMenus.create(linkMenuGR, handleCreateError);		}	if (linkMenuGRVTId == null) {		var linkMenuGRVT = {			'title': 'Save link to Google+ via textise',			'contexts': ['link'],			'onclick': function (info, tab){				contextMenuGReaderOnClick(info, tab, true);			},			'targetUrlPatterns': ['http://*/*', 'https://*/*']		};				linkMenuGRVTId = chrome.contextMenus.create(linkMenuGRVT, handleCreateError);	}		if (linkMenuGBId == null) {		var linkMenuGB = {			'title': 'Save link to Google Bookmarks',			'contexts': ['link'],			'onclick': function (info, tab) {				ctxtGBOnClick(info, tab);			},			'targetUrlPatterns': ['http://*/*', 'https://*/*']		};		linkMenuGBId = chrome.contextMenus.create(linkMenuGB, handleCreateError);	}		if (linkMenuVTId == null) {		var linkMenuVT = {			'title': 'Open link in New Tab as textise',			'contexts': ['link'],			'onclick': function (info, tab) {				ctxtVTOnClick(info, tab);			},			'targetUrlPatterns': ['http://*/*', 'https://*/*']		};		linkMenuVTId = chrome.contextMenus.create(linkMenuVT, handleCreateError);	}		if (linkMenuTrelloId == null) {		var linkMenuTrello = {			'title': 'Create trello card from link',			'contexts': ['link'],			'onclick': function (info, tab) {				ctxtTrelloOnClick(info, tab);			},			'targetUrlPatterns': ['http://*/*', 'https://*/*']		};		linkMenuTrelloId = chrome.contextMenus.create(linkMenuTrello, handleCreateError);	}	}function ctxtTrelloOnClick (info, tab){	var url = info.linkUrl;		//create popup window	var scr = 'ezTrelloCard("' + url + '");'		chrome.tabs.executeScript(null, {code: scr});	    }function ctxtVTOnClick(info, tab) {	var vturl = info.linkUrl; 	vturl = 'https://www.textise.net/showText.aspx?strURL=' + encodeURIComponent(vturl) + '#content';	//open in new tab	chrome.tabs.create({url: vturl, selected: true}, null);	}function ctxtGBOnClick(info, tab) {	var url = info.linkUrl;	GetURLDocumentTitleJQ(url);}function contextMenuGReaderOnClick (info, tab, IsVT){	var url = info.linkUrl;	if (IsVT) {		url = 'https://www.textise.net/showText.aspx?strURL=' + encodeURIComponent(url) + '#content';	}		//create popup window	var scr = 'ezReaderOneClick("' + url + '");'		chrome.tabs.executeScript(null, {code: scr});	    }var ezlpnotification = null;var eztimeout = null;function ezNotify(msg) {	try {		if (eztimeout != null) {			clearTimeout(eztimeout);		}				if (ezlpnotification != null) {			ezlpnotification.cancel();		}			ezlpnotification = null;		ezlpnotification = webkitNotifications.createNotification(		  'data:image/png;base64,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',		  'ezLinkPreview Message',		  msg 		);		ezlpnotification.show();				eztimeout = setTimeout(CancelNotification, 8000);	} catch (err) {	}}function CancelNotification() {		if (ezlpnotification != null) {			ezlpnotification.cancel();		}}  var myport;chrome.extension.onConnect.addListener(onPortConnect);function onPortConnect(a){    myport = a;    a.onMessage.addListener(onMessageReceived);}function onMessageReceived(a, p, cb){    if (a.message == 'tab') {		try{			chrome.tabs.getSelected(null, function(tab){				var new_idx = tab.index;				++new_idx;				var link = a.values;				var fg = false;				if (a.sel)					fg = a.sel;				chrome.tabs.create({url : link, selected : fg, index : new_idx});			});  		} catch (e){}	} else if (a.message == 'getprefs') {		var pin = restore_pinned();		var w = restore_width();		var h = restore_height();		var defPrev = restore_default();		var defLoc = restore_defaultLoc();		var defTab = restore_defaultTab();		var excList = restore_exclusionList();		var newtabList = restore_newtablist();		var delayTime = restore_delaytime();		var defReader = restore_defaultReader();		var defBookmark = restore_defaultBookmark();		var defPloc = restore_defaultPloc();		var selText = localStorage['SavedSelectedText'] || '';		var defAction = restore_defaultAction();		var defSelText = restore_defaultSelText();		var defSearchEngine = localStorage['SaveSearchEngine'] || '0';		var defPreview = restore_defaultPreview();		var defPDF = restore_defaultPDF();		var defKS = restore_defaultKeyShortcut();		var defLeftSize = restore_defaultLeftSize();		var defVis = restore_defaultVis();		var iconSize = restore_iconSize();		var custSearch = restore_custSearch();		var autosplitList = restore_autosplitList();		var defTitlebar = restore_titleBarVisibility();		var ezx = restore_ezx();		var ezy = restore_ezy();		var closeOnLeave = restore_closeOnLeave();		var defaultImage = localStorage['defaultImage'] || '2';		var AllShortcuts = restore_AllShortcuts();		var engineJSON = restore_SearchEngineJSON();		var clickOutside = restore_ClickOutside();		var ViewTextURLs = restore_ViewTextList();		var pinp = restore_Pinp();		var googbar = restore_Googbar();		var pioh = restore_PreviewImageOnHover();				myport.postMessage({            message: "prefs",            IsPinned: pin ,			DefWidth: w,			DefHeight: h,			DefPrev: defPrev,			DefLoc: defLoc,			DefTab: defTab,			ExcList: excList,			NewTabList: newtabList,			DelayTime: delayTime,			DefReader: defReader,			DefBookmark: defBookmark,			DefPloc: defPloc,			SelectedText: selText,			DefAction: defAction,			DefSelText: defSelText,			DefSearch: defSearchEngine,			DefPreview: defPreview,			DefPDF: defPDF,			DefKS: defKS,			DefLeftSize: defLeftSize,			DefVis: defVis,			IconSize: iconSize,			CustSearch: custSearch,			AutosplitList: autosplitList,			DefTitlebar: defTitlebar,			EZX: ezx,			EZY: ezy,			CloseOnLeave: closeOnLeave,			DefaultImage: defaultImage,			DefAllShortcuts: AllShortcuts,			SearchEngineJSON: engineJSON,			ClickOutside: clickOutside,			ViewTextList: ViewTextURLs,			Pinp: pinp,			Googbar: googbar,			Pioh: pioh        });		} else if (a.message == 'setprefs') {		var pin = a.IsPinned;		var s = pin ? "true" : "false";		store_pinned(s);		store_size(a.DefWidth, a.DefHeight);	} else if (a.message == 'toggleIcon'){		var defPrev = restore_default();		if (defPrev == '2')			defPrev = '1';		else			defPrev = '2';				localStorage['default'] = defPrev;		myport.postMessage({            message: "toggleIconReturn",			DefPrev: defPrev        });			}	else if (a.message == 'SaveSelectedText'){		localStorage['SavedSelectedText'] = a.SelectedText;	}	else if (a.message == 'SaveSearchEngine'){		localStorage['SaveSearchEngine'] = a.SelectedText;	}	else if (a.message == 'ezNotify') {		ezNotify(a.text);	}//	else if (a.message == 'addUrlToHistory') {		//		chrome.history.addUrl({url: a.url});//	}}chrome.extension.onRequest.addListener(  function(request, sender, sendResponse) {    if (request.message == "GWH"){      var urlIn = request.inurl;	  sendToGWH(urlIn);	  sendResponse({text: urlIn});	}  });  function restore_default() {  return localStorage['default'] || '2';}  function restore_defaultLoc() {    return localStorage['defaultLoc'] || '2';}function restore_defaultTab() {    return localStorage['defaultTab'] || '2';}function restore_exclusionList() {	return localStorage['filterUrls'] || '';}function restore_newtablist() {	return localStorage['newtabUrls'] || '';}function restore_delaytime() {	return localStorage['delayTime'] || '700';}function restore_defaultReader() {	return localStorage['defaultReader'] || '2';}function restore_defaultBookmark() {	return localStorage['defaultBookmark'] || '2';}function restore_defaultPloc() {	return localStorage['defaultPreviewLoc'] || '0';}function restore_defaultAction() {	return localStorage['defaultAction'] || '2';}function restore_defaultSelText() {	return localStorage['defaultSelText'] || '2';}function restore_defaultPreview() {	return localStorage['defaultPreview'] || '2';}function restore_defaultPDF() {	return localStorage['defaultPDF'] || '2';}function restore_defaultKeyShortcut() {	return localStorage['defaultKeyShortcut'] || '2';}function restore_defaultLeftSize() {	return localStorage['leftpanelSize'] || '50';}function restore_defaultVis() {	return localStorage['defaultVis'] || '2';}function restore_iconSize() {	return localStorage['iconSize'] || '16';}function restore_custSearch() {	return localStorage['customSearch'] || '';}function restore_autosplitList() {	return localStorage['autosplitUrls'] || '';}function restore_titleBarVisibility() {	return localStorage['defaultTitlebar'] || '2';}function restore_contextVis() {	return localStorage['defaultContext'] || '2';}function restore_ezx() {	return localStorage['ezx'] || '4';}function restore_ezy() {	return localStorage['ezy'] || '6';}function restore_closeOnLeave() {	return localStorage['closeOnLeave']  || '2';}function restore_AllShortcuts() {	return localStorage['defaultAllShortcut'] || '2';}function restore_ClickOutside() {	return localStorage['defaultClickOutside'] || '2';}function restore_Pinp() {	return localStorage['defaultPinp'] || '2';}function restore_Googbar() {	return localStorage['defaultGoogbar'] || '2';}function restore_PreviewImageOnHover() {	return localStorage['pioh'] || '2';}function restore_ViewTextList() {	return localStorage['viewTextUrls'] || '';}function restore_SearchEngineJSON() {    var engineJSON = { "engines": [			{ "type": "Dogpile", "name": "", "url": "", "img": "" },			{ "type": "Bing", "name": "", "url": "", "img": "" },			{ "type": "Yahoo", "name": "", "url": "", "img": "" },			{ "type": "Wiki", "name": "", "url": "", "img": "" },			{ "type": "Video", "name": "", "url": "", "img": "" },			{ "type": "Amazon", "name": "", "url": "", "img": "" },			{ "type": "Dictionary", "name": "", "url": "", "img": "" },			{ "type": "Baidu", "name": "", "url": "", "img": "" },			{ "type": "Custom", "name": "Urbandictionary", "url": "https://www.textise.net/showText.aspx?strURL=http://www.urbandictionary.com/define.php?term={0}", "img": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABEElEQVQoz2N8kaTEQApgYSAR0EADl9lHHrv3//8wvp4gT5SGnze52eR/sKt/Rdggkv2YifPv+5USvx9ziBY8ZGBggBjGKvuD3+81M/+fP69ZUZz0Zb8gf8BrVsmfvx9zfL/Ey231ASInGP3871vWjxtEed3eomj4cY2Hz+sNhP9lnxBEA6vsD0aW/x9WSfz9yMLE8xeuB90PHFpfIAxm3j8MDAx/P7LgDCUu00/fTvGzKX1nYGBg5v/z4xoPf8BrPp/Xn7aIwn3MwMDACIlpLrOPvC7vGJj+///BxMjxj4GB4c1kOU7jT9wWHxkYGP7/YoQIvmxRYkROGhxaX35c48F0JLIgihMxVWMKDoa0hAYASMtjsxfzB1oAAAAASUVORK5CYII=" },			{ "type": "Custom", "name": "DuckDuckGo", "url": "http://duckduckgo.com/?q={0}", "img": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACRklEQVQ4y42SP0xTURTGv/t4VCkCioNxURZorUKMCw7EBSUxREedlEVJbBTjQOImmoigEVKwNaEiNS6m8c+gCYmJDIQEm2hSStJEMA4Oksorr63A68O+9zmUvva1DJ7kDPfec373+3KOIInSyMQiDzj96bYZX4IZXwYASJ5mSJ4WSGc7n9a1tXtL60UpIBUYozH2DNC3sGPsckDuu4IGb5+oAKiXemjORfA/IXW0Y9/LF8ICpALjNB75AQD1oSCq3C5QVaFNhqC/frcjpKrfi73ePiFIIuluY0G2dPgQnN5eVJ/pBLI6tPEAsuE3gGFU2KkOB0fl1PAgSz3XjTyEfOK4da4dvAexpxZacMoO0LdgTs/ckhlfsks74rafr3+Efu1cJQAA498gF0ZlXWYykPtnYTzpAgAYo8dgrs3AeVVBVYsOrEv4c/cgAMCML0Mup+YWYlYzf90Ek4G85W4gt+DE5tR+W70seZphziaLgNgiHF2n8wDtC7heg43xBuRiNeCGZGsWnmbIwtMCzH4uUbBYnHfTe2hvj8LpXYVwEMZPBzZHDsBYkbcBLoj0wvydvxd6BwqTEPX1aIxGAJFfNvXkKZiJ3xC7TTArlY1xYgokofp9VJpcVoaiQ0xoCZLkj4vnOeDrtr0rTS6qfh9J7rzKj8MdUAwZK9k0PFINvkPHRM/XoveOdjRurzJIWqn6fVRcrXz+4QYVTSFJrs3NFBW4Wq2fC2kDkEQ6Ov8qMxlkTs/SNE0aqwqTl3uoDt1nOjo/XF7/D4vVW1hGKL2vAAAAAElFTkSuQmCC" },			{ "type": "Custom", "name": "StartPage", "url": "https://startpage.com/do/search?q={0}", "img": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACdklEQVQoz02SS0hVURSG/73PPr6lo+alojQ1owIzy4yCdJKVPRQibRD2wqRB9JhkUQ1KZ2lRCTWQSKWESwRJSEUQKCIJRVcsIiufFFnWDe/Vc89+rAZmuSZr/QvWx7/gZ429ntYABwCY2QHMmumgWc2gSdgQEQVjCAA0AEAzWOAgBbJCwZiBPjc7FwmONmQB0BBSQipwNgfHwAWlPGlZ1FxnhYIAxveeGNt/kQtognA9SAP23wzBwJJYeLduMnN1aNmaBc9afA9uIBj8XN1goiA8TZIA8/cBDkr81Jf6sh1A/6kmFe98Kapce77Y97zl24bSUF6hkJJcxWbQM8Zy2mpT+jtlvOMpSJeUk/b2SH3uzarYj4FfKwuFKxGRBDDG4YuFAeutbtrYUO4MB7Lu1QYO1HNASgCQCi6BHfW7UiE+CocK7PwlfMpDTUdETQQLr1ckjQTCqelj60ozOlvDqendp/3McdjB+66WuLzT9iWyFx/M0IQZDJIvjn0d/VlwrSJ5NODFOW/KLozk79Yxji1IKEk7VomMFH623fs+SWU51vEiG8Dgj9RL0/7i2xUpowFnKPC+oJJ5IA0hFZYmMwAF6XzrCishmoUiFPaQMZ9nZiV1HPOX3Cpf3tNKQHf5FdIQSqJrwGzKtPbkCgBP3+nmHpm72KrZZmsPYXveo8P+0jsVxkAqgmBsV+O0VMhL49k+3jWgGJAQw86VRIUjdLLNIwaAYqZ/R2IdgOxosC0NU5itfetF1WYbwMC4OfPQC00RrNkAzISGQUiP/u2Mwath83pIPw6oSZcMGBQ4BwBmAAAcbPvVKalpDmJuqhkBbM5BVDT7A9g1I3p6751XAAAAAElFTkSuQmCC" },			{ "type": "Custom", "name": "", "url": "", "img": "" },			{ "type": "Custom", "name": "", "url": "", "img": "" },			{ "type": "Custom", "name": "", "url": "", "img": "" },			{ "type": "Custom", "name": "", "url": "", "img": "" },			{ "type": "Custom", "name": "", "url": "", "img": "" },			{ "type": "Custom", "name": "", "url": "", "img": "" },			{ "type": "Custom", "name": "", "url": "", "img": "" },			{ "type": "Custom", "name": "", "url": "", "img": "" },			{ "type": "Custom", "name": "", "url": "", "img": "" }		]    };				return localStorage['SearchEngineJSON'] || JSON.stringify(engineJSON);}  function restore_pinned() {	var pinned = "true";	try { pinned = localStorage["DefaultPinned"]; } catch (eee) {}	if (pinned == null || pinned.length < 1) {		pinned = "true";		localStorage["DefaultPinned"] = "true";	}	return pinned == "true";}function store_pinned(IsPinned) {	localStorage["DefaultPinned"] = IsPinned;}function restore_width() {	var w = 0;	try { 		w = parseInt( localStorage["DefaultWidth"] ); 	} catch (eee) {}	if (w == null) {		w = 0;		localStorage["DefaultWidth"] = w;	}	return w;}function restore_height() {	var h = 0;	try { 		h = parseInt( localStorage["DefaultHeight"] ); 	} catch (eee) {}	if (h == null) {		h = 0;		localStorage["DefaultHeight"] = h;	}	return h;}function store_size(w, h) {	localStorage["DefaultWidth"] = w.toString();	localStorage["DefaultHeight"] = h.toString();}function toHex8(b) {	return (b < 16 ? "0": "") + b.toString(16)}function hexEncodeU32(b) {	var c = toHex8(b >>> 24);	c += toHex8(b >>> 16 & 255);	c += toHex8(b >>> 8 & 255);	return c + toHex8(b & 255)}function awesomeHash(b) {	for (var c = 16909125, d = 0; d < b.length; d++) {		var HASH_SEED_ = "Mining PageRank is AGAINST GOOGLE'S TERMS OF SERVICE. Yes, I'm talking to you, scammer.";		c ^= HASH_SEED_.charCodeAt(d % HASH_SEED_.length) ^ b.charCodeAt(d);		c = c >>> 23 | c << 9	}	return hexEncodeU32(c)}function getUrlToSendQueryFor(b) {    var c = b.match(/^https:\/\/[^\/]*[\/]?/i);    if (c) return c[0];    return b}function sendToGWH(inUrl) {	if(inUrl.substr(0,4) != "http")                return;		var url = getUrlToSendQueryFor(inUrl).split("#")[0];		var hash = awesomeHash(url);	//var query = "http://www.google.com/search?client=navclient-auto&ch=8" + hash + "&features=Rank&q=info:" + url;	var query = "http://toolbarqueries.google.com/tbr?client=navclient-auto&ch=8" + hash + "&features=Rank&q=info:" + url;	var xhr = new XMLHttpRequest();	xhr.open("GET", query, false);	xhr.send();}function GetURLDocumentTitleJQ(url) {	var ezPageTitle = url; //default the title to the URL	$.ajax({		url: url,		async: true,		success: function(data) {			try {				var matches = data.match(/<title>(.*?)<\/title>/);				var title = matches[1];						if (title != null && title.length > 0) {					ezPageTitle = title;				}				} catch (err) {}						var scr = 'ezBookmarkOneClick("' + url + '", "' + ezPageTitle + '");';			chrome.tabs.executeScript(null, {code: scr});		},		error: function() {			var scr = 'ezBookmarkOneClick("' + url + '", "' + url + '");';			chrome.tabs.executeScript(null, {code: scr});				 }	});}init();